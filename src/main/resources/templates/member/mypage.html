<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>DirEngine - Free Bootstrap 4 Template by Colorlib</title>
    <div th:include="fragments/css.html :: css"></div>
    <link rel="stylesheet" th:href="@{css/mypage.css}">
</head>
<body>

<nav th:include="fragments/navbar.html :: navbar"></nav>
<!-- END nav -->

<div class="hero-wrap js-fullheight" style="background-image: url('images/bg_2.jpg')">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-center justify-content-center"
             data-scrollax-parent="true">
            <div class="col-md-9 ftco-animate text-center" data-scrollax=" properties: { translateY: '70%' }">
                <p class="breadcrumbs" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }">
                    <span class="mr-2"><a href="/">Home</a></span>
                    <span>Mypage</span>
                </p>
                <h1 class="mb-3 bread" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }">
                    Mypage
                </h1>
            </div>
        </div>
    </div>
</div>

<section class="mypage-section">
    <!-- 마이페이지 컨테이너 -->
    <div class="mypage-container">
        <!-- 사이드 메뉴 -->
        <div class="sidebar">
            <ul>
                <!-- 예약 내역 메뉴 -->
                <li onclick="showSection('reservation')">
                    <a href="javascript:void(0);"> <!-- 페이지 새로고침 방지 -->
                        예약 내역
                        <span class="arrow">></span> <!-- 오른쪽 화살표 추가 -->
                    </a>
                </li>
                <!-- 쿠폰 메뉴 -->
                <li onclick="showSection('coupons')">
                    <a href="javascript:void(0);">
                        쿠폰
                        <span class="arrow">></span>
                    </a>
                </li>
                <!-- 내 정보 수정 메뉴 -->
                <li onclick="showSection('profile-edit')">
                    <a href="javascript:void(0);">
                        내 정보 수정
                        <span class="arrow">></span>
                    </a>
                </li>
                <!-- 로그인관리 메뉴 -->
                <li onclick="showSection('activity-log')">
                    <a href="javascript:void(0);">
                        로그인 관리
                        <span class="arrow">></span>
                    </a>
                </li>
                <!-- 회원 탈퇴 메뉴 추가 -->
                <li onclick="showSection('withdrawal')">
                    <a href="javascript:void(0);">
                        회원 탈퇴
                        <span class="arrow">></span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- 메인 콘텐츠 -->
        <div class="content">
            <!-- 예약 내역 섹션 -->
            <div id="reservation" class="section">
                <h2>예약 내역</h2>
                <div class="reservation-list">
                    <!-- 예약된 항목 리스트 -->
                    <div class="reservation-item">
                        <img src="path/to/hotel_image1.jpg" alt="Hotel 1">
                        <div class="details">
                            <p>호텔 이름: 아산 카네기</p>
                            <p>예약 상태: 이용완료</p>
                            <button class="btn-primary">예약 상세</button>
                        </div>
                    </div>
                    <div class="reservation-item">
                        <img src="path/to/hotel_image2.jpg" alt="Hotel 2">
                        <div class="details">
                            <p>호텔 이름: 장유 W</p>
                            <p>예약 상태: 이용완료</p>
                            <button class="btn-primary">예약 상세</button>
                        </div>
                    </div>
                    <!-- 예약 내역이 없는 경우 -->
                    <div class="no-reservation">
                        <p>예정된 여행이 없습니다. 지금 새로운 예약을 진행해보세요.</p>
                        <button class="btn-primary">여행지 찾아보기</button>
                    </div>
                </div>
                <!-- 예약 취소 버튼 추가 -->
                <div class="reservation-cancel">
                    <button class="btn-danger">예약 취소</button>
                </div>
            </div>


            <!-- 쿠폰 섹션 -->
            <div id="coupons" class="section" style="display: none;">
                <h2>쿠폰</h2>
                <div class="coupon-list">
                    <!-- 쿠폰이 있을 경우 -->
                    <div class="coupon-item">
                        <p>쿠폰 이름: 여름 할인 쿠폰</p>
                        <p>유효기간: 2024-08-31</p>
                        <button>쿠폰 사용하기</button>
                    </div>
                    <div class="coupon-item">
                        <p>쿠폰 이름: 겨울 할인 쿠폰</p>
                        <p>유효기간: 2024-12-31</p>
                        <button>쿠폰 사용하기</button>
                    </div>
                    <!-- 쿠폰이 없는 경우 -->
                    <div class="no-coupons">
                        <p>현재 사용할 수 있는 쿠폰이 없습니다.</p>
                    </div>
                </div>
            </div>

            <!-- 내 정보 수정 섹션 -->
            <div id="profile-edit" class="section" style="display: none;">
                <h2>내 정보 수정</h2>
                <form id="profileForm" method="post" action="/updateProfile">
                    <label for="email">이메일 (USER_EMAIL):</label>
                    <input type="email" id="email" name="email" value="example@example.com" required>

                    <!-- 기본 비밀번호 필드 -->
                    <label for="password">비밀번호 (USER_PWD)</label>
                    <div style="display: flex; align-items: center;">
                        <input type="password" id="password" name="password" value="********" readonly style="flex: 1;">
                        <button type="button" id="changePasswordButton" style="margin-left: 10px;">변경</button>
                    </div>

                    <!-- 숨겨진 비밀번호 변경 필드 -->
                    <div id="passwordChangeFields" style="display: none; margin-top: 20px;">
                        <label for="currentPassword"></label>
                        <input type="password" id="currentPassword" name="currentPassword" placeholder="현재 비밀번호">

                        <label for="newPassword"></label>
                        <input type="password" id="newPassword" name="newPassword" placeholder="새로운 비밀번호">

                        <label for="confirmNewPassword"></label>
                        <input type="password" id="confirmNewPassword" name="confirmNewPassword"
                               placeholder="새로운 비밀번호 확인">

                        <div style="display: flex; justify-content: flex-end; margin-top: 10px;">
                            <button type="button" id="cancelPasswordChange" style="margin-right: 10px; width:52px;">취소</button>
                            <button type="submit" style="width:52px;">저장</button>
                        </div>
                    </div>

                    <label for="name">이름 (USER_NAME)</label>
                    <input type="text" id="name" name="name" value="홍길동" required>

                    <!-- 휴대폰 번호 필드 -->
                    <label for="phone">휴대폰 번호 (USER_PHONE)</label>
                    <div style="display: flex; align-items: center;">
                        <input type="text" id="phone" name="phone" value="010-1234-5678" readonly style="flex: 1;">
                        <button type="button" id="changePhoneButton" style="margin-left: 10px; width:52px;">수정</button>
                    </div>

                    <!-- 숨겨진 인증번호 입력 필드 -->
                    <div id="phoneChangeFields" style="display: none; margin-top: 20px;">
                        <div style="display: flex; align-items: center;">
                            <input type="text" id="newPhone" name="newPhone" placeholder="새로운 휴대폰 번호" style="flex: 1;">
                            <button type="button" id="sendVerificationCode" style="margin-left: 10px;">인증번호 전송</button>
                        </div>

                        <input type="text" id="verificationCode" name="verificationCode" placeholder="인증번호 입력"
                               style="margin-top: 10px;">

                        <div style="display: flex; justify-content: flex-end; margin-top: 10px;">
                            <button type="button" id="cancelPhoneChange" style="margin-right: 10px; width:52px;">취소</button>
                            <button type="submit" style="width:52px;">저장</button>
                        </div>
                    </div>


                    <button type="submit">수정 완료</button>
                </form>
            </div>

            <!-- 이력 관리 섹션 -->
            <div id="activity-log" class="section" style="display: none;">
                <h2>로그인 관리</h2>
                <p>회원 생성일, 마지막 로그인일자, IP 주소를 확인할 수 있습니다.</p>

                <!-- 로그인 로그 테이블 -->
                <table class="log-table">
                    <thead>
                    <tr>
                        <th>회원 생성일</th>
                        <th>마지막 로그인일자</th>
                        <th>IP 주소</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>2024/03/13 (수) 18:56</td>
                        <td>2024/07/31 (수) 21:44</td>
                        <td>223.33.165.109 (대한민국)</td>
                    </tr>
                    <tr>
                        <td>2024/03/13 (수) 18:56</td>
                        <td>2024/07/31 (수) 19:49</td>
                        <td>106.101.68.104 (대한민국)</td>
                    </tr>
                    <tr>
                        <td>2024/03/14 (목) 14:43</td>
                        <td>2024/07/29 (월) 10:45</td>
                        <td>106.101.193.220 (대한민국)</td>
                    </tr>
                    <!-- 다른 로그인 기록들 추가 -->
                    </tbody>
                </table>
            </div>

            <!-- 회원 탈퇴 섹션 -->
            <div id="withdrawal" class="section" style="display: none;">
                <h2>회원 탈퇴</h2>
                <p>현재 사용 중인 계정 정보는 복구 불가능합니다.</p>
                <p>회원 탈퇴 시, 회원님의 모든 쿠폰이 소멸되며 어떠한 경우에도 복구할 수 없습니다.</p>

                <h3>탈퇴 사유</h3>
                <form id="withdrawalForm">
                    <div class="radio-group">
                        <label>
                            <div>
                                <input type="radio" name="reason" value="재가입" required>
                            </div>
                            <span>재가입(ID변경)</span>
                        </label>
                        <label>
                            <div>
                                <input type="radio" name="reason" value="정보 부족 또는 불필요한 정보">
                            </div>
                            <span>나에게 필요한 정보가 부족하거나, 불필요한 정보가 많아서</span>
                        </label>
                        <label>
                            <div>
                                <input type="radio" name="reason" value="보안 문제">
                            </div>
                            <span>개인정보 유출 방지 등 보안 상의 문제</span>
                        </label>
                        <label>
                            <div>
                                <input type="radio" name="reason" value="기타">
                            </div>
                            <span>기타</span>
                        </label>
                        <!-- 기타 사유 입력 필드 -->
                        <textarea id="otherReason" name="otherReason" placeholder="기타 사유를 입력해 주세요." style="width: 100%;"></textarea>
                        <!-- 현재 입력된 문자 수와 최대 문자 수를 표시하는 문구 -->
                        <p id="charCount" style="text-align: right; font-size: 12px; color: #666; margin:0px;">0 / 250</p>
                        <!-- 250자 초과 시 표시할 에러 메시지 (기본적으로 숨김) -->
                        <span id="errorMessage" style="text-align: left; font-size: 13px; color: red; display: none; margin-left:5px;">250자가 초과되었습니다.</span>

                    </div>

                    <div class="checkbox-group">
                        <label>
                            <div>
                                <input type="checkbox" name="confirmation" required>
                            </div>
                            <span>상기 내용을 확인하였으며 동의합니다.</span>
                        </label>
                    </div>

                    <button type="submit">회원 탈퇴하기</button>
                </form>
            </div>

        </div>
    </div>
</section>

<div th:include="fragments/footer.html :: footer"></div>
<!-- loader -->
<div id="ftco-loader" class="show fullscreen">
    <svg class="circular" width="48px" height="48px">
        <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
        <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#F96D00"/>
    </svg>
</div>


</body>
<div th:include="fragments/js.html :: js"></div>
</html>
